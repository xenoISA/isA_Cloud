# NATS Server Configuration for Staging
# Optimized for AWS ECS deployment

# Server settings
server_name: nats-staging
listen: 0.0.0.0:4222
http_port: 4223

# Logging
logtime: true
debug: false
trace: false

# Limits
max_connections: 1000
max_control_line: 4096
max_payload: 8MB
max_pending: 64MB

# JetStream for message persistence
jetstream {
    store_dir: "/data/nats/jetstream"
    max_memory_store: 1GB
    max_file_store: 10GB
}

# Monitoring
http: 4223
# server_stats is deprecated, use monitoring port instead

# Performance tuning
write_deadline: "10s"
max_closed_clients: 500

# Health check endpoint
accounts {
    $SYS {
        users = [
            { user: "sys", pass: "staging_sys_2024" }
        ]
    }
}