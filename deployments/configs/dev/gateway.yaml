# IsA Cloud Gateway Configuration

app:
  name: "IsA Cloud Gateway"
  version: "1.0.0"

environment: "development"
debug: true

server:
  host: "0.0.0.0"
  http_port: 8000  # Gateway主端口
  grpc_port: 8001  # Gateway gRPC端口

services:
  user_service:
    host: "localhost"
    http_port: 8201  # Account服务端口
    grpc_port: 9201
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  auth_service:
    host: "localhost"
    http_port: 8202  # Auth服务端口
    grpc_port: 9202
    timeout: "10s"
    retry:
      max_attempts: 3
      backoff: "1s"

  agent_service:
    host: "localhost"
    http_port: 8080  # 现有isA_agent端口
    grpc_port: 9080
    timeout: "60s"
    retry:
      max_attempts: 2
      backoff: "2s"

  model_service:
    host: "localhost"
    http_port: 8082  # 现有isA_model端口
    grpc_port: 9082
    timeout: "120s"
    retry:
      max_attempts: 2
      backoff: "5s"

  mcp_service:
    host: "localhost"
    http_port: 8081  # 现有isA_mcp端口
    grpc_port: 9081
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  task_service:
    host: "localhost"
    http_port: 8211  # Task服务端口
    grpc_port: 9211
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  session_service:
    host: "localhost"
    http_port: 8205  # Session服务端口
    grpc_port: 9205
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  authorization_service:
    host: "localhost"
    http_port: 8203  # Authorization服务端口
    grpc_port: 9203
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  audit_service:
    host: "localhost"
    http_port: 8204  # Audit服务端口
    grpc_port: 9204
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  storage_service:
    host: "localhost"
    http_port: 8208  # Storage服务端口
    grpc_port: 9208
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  notification_service:
    host: "localhost"
    http_port: 8206  # Notification服务端口
    grpc_port: 9206
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  payment_service:
    host: "localhost"
    http_port: 8207  # Payment服务端口
    grpc_port: 9207
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  wallet_service:
    host: "localhost"
    http_port: 8209  # Wallet服务端口
    grpc_port: 9209
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  order_service:
    host: "localhost"
    http_port: 8210  # Order服务端口
    grpc_port: 9210
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  organization_service:
    host: "localhost"
    http_port: 8212  # Organization服务端口
    grpc_port: 9212
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  invitation_service:
    host: "localhost"
    http_port: 8213  # Invitation服务端口
    grpc_port: 9213
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  device_service:
    host: "localhost"
    http_port: 8220  # Device服务端口
    grpc_port: 9220
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  ota_service:
    host: "localhost"
    http_port: 8221  # OTA服务端口
    grpc_port: 9221
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  telemetry_service:
    host: "localhost"
    http_port: 8225  # Telemetry服务端口
    grpc_port: 9225
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

  event_service:
    host: "localhost"
    http_port: 8230  # Event服务端口
    grpc_port: 9230
    timeout: "30s"
    retry:
      max_attempts: 3
      backoff: "1s"

database:
  host: "localhost"
  port: 5432
  database: "isa_cloud"
  username: "postgres"
  password: "password"
  ssl_mode: "disable"

redis:
  host: "localhost"
  port: 6379
  password: ""
  database: 0

logging:
  level: "debug"
  format: "text"  # text for development, json for production
  output: "stdout"

monitoring:
  enabled: true
  port: 9090
  path: "/metrics"
  namespace: "isa_cloud"
  subsystem: "gateway"

security:
  cors:
    enabled: true
    allow_origins: 
      - "http://localhost:3000"
      - "http://localhost:3001"
      - "http://localhost:3002"
      - "http://localhost:5173"
      - "http://localhost:8000"
    allow_methods: 
      - "GET"
      - "POST"
      - "PUT"
      - "DELETE"
      - "OPTIONS"
    allow_headers: 
      - "Authorization"
      - "Content-Type"
      - "X-Request-ID"
      - "Cache-Control"
    allow_credentials: true

  rate_limit:
    enabled: false  # Disabled for testing
    rps: 100
    burst: 200

  jwt:
    secret: "your-development-secret-key"
    expiration: "24h"
    issuer: "isa-cloud-gateway"

blockchain:
  enabled: true
  chains:
    isa_chain:
      rpc_endpoint: "http://localhost:8545"
      chain_id: 1337
      network_name: "isA_Chain"
      consensus_type: "hybrid"
      enabled: true
    ethereum:
      rpc_endpoint: "https://mainnet.infura.io/v3/YOUR_PROJECT_ID"
      chain_id: 1
      network_name: "Ethereum Mainnet"
      enabled: false
  default_chain: "isa_chain"
  private_key: ""  # Set in production environment
  gas_settings:
    default_gas_limit: 21000
    default_gas_price: "20000000000"  # 20 gwei
    max_gas_price: "100000000000"     # 100 gwei

mqtt:
  enabled: true
  broker_url: "tcp://localhost:1883"
  client_id: "isa_cloud_gateway"
  username: ""
  password: ""
  keep_alive: "60s"
  ping_timeout: "10s"
  clean_session: true
  auto_reconnect: true
  qos: 1
  topics:
    device_telemetry: "devices/+/telemetry"
    device_status: "devices/+/status"
    device_commands: "devices/+/commands"
    device_commands_response: "devices/+/commands/response"
    device_auth: "devices/+/auth"
    device_registration: "devices/register"
    system_events: "system/events"
    notification_user_receive: "notifications/users/+/receive"
    notification_user_ack: "notifications/users/+/ack"
    notification_broadcast: "notifications/broadcast"
    notification_system: "notifications/system/+"

device_management:
  enabled: true
  device_service:
    host: "localhost"
    http_port: 8220  # Device Management Service port
    grpc_port: 9220
    timeout: "30s"
  telemetry_service:
    host: "localhost"
    http_port: 8225  # Telemetry Service port
    grpc_port: 9225
    timeout: "30s"
  ota_service:
    host: "localhost"
    http_port: 8221  # OTA Service port
    grpc_port: 9221
    timeout: "60s"

consul:
  enabled: true
  host: "localhost"
  port: 8500