# ============================================
# isA Platform - Test Environment
# ============================================
# Full Docker stack - all services in containers with test ports

ENVIRONMENT=test
DEBUG=true

# ============================================
# Service URLs (Docker Network - Internal)
# ============================================
CONSUL_HOST=isa-consul-test
CONSUL_PORT=8500

# Test Environment Ports (1xxxx range to avoid conflicts with dev)
CONSUL_DNS_PORT=18600
GATEWAY_PORT=18000
LOKI_PORT=13100
GRAFANA_PORT=13003

# NATS Cluster Ports
NATS_1_CLIENT_PORT=14222
NATS_1_CLUSTER_PORT=16222
NATS_1_HTTP_PORT=18222
NATS_2_CLIENT_PORT=14223
NATS_2_CLUSTER_PORT=16223
NATS_2_HTTP_PORT=18223
NATS_3_CLIENT_PORT=14224
NATS_3_CLUSTER_PORT=16224
NATS_3_HTTP_PORT=18224

# Database Ports
POSTGRES_PORT=15432
REDIS_PORT=16379
NEO4J_HTTP_PORT=17474
NEO4J_BOLT_PORT=17687
INFLUXDB_PORT=18086

# Storage Ports
MINIO_API_PORT=19000
MINIO_CONSOLE_PORT=19001

# IoT Ports
MQTT_PORT=11883
MQTT_WS_PORT=11884

NATS_URL=nats://isa-cloud-nats-1-test:4222,nats://isa-cloud-nats-2-test:4222,nats://isa-cloud-nats-3-test:4222

GATEWAY_URL=http://isa-gateway-test:8000
MCP_URL=http://isa-mcp-test:8081
MODEL_URL=http://isa-model-test:8082
AGENT_URL=http://isa-agent-test:8083

# ============================================
# Database Configuration (Using Local Supabase with test schema)
# ============================================
# All services connect to local Supabase test schema via host.docker.internal
DATABASE_URL=postgresql://postgres:postgres@host.docker.internal:54322/postgres?options=-c%20search_path=test
MCP_DATABASE_URL=postgresql://postgres:postgres@host.docker.internal:54322/postgres?options=-c%20search_path=test
MODEL_DATABASE_URL=postgresql://postgres:postgres@host.docker.internal:54322/postgres?options=-c%20search_path=test
AGENT_DATABASE_URL=postgresql://postgres:postgres@host.docker.internal:54322/postgres?options=-c%20search_path=test
USER_DATABASE_URL=postgresql://postgres:postgres@host.docker.internal:54322/postgres?options=-c%20search_path=test

# Postgres
POSTGRES_DB=isa_platform
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# Supabase Configuration
JWT_SECRET=super-secret-jwt-token-with-at-least-32-characters-long-test-env
JWT_EXPIRY=3600
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU

# Supabase URLs and Keys (Using Local Supabase)
SUPABASE_URL=http://host.docker.internal:54321
SUPABASE_LOCAL_URL=http://host.docker.internal:54321
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SUPABASE_LOCAL_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU
SUPABASE_LOCAL_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU

# Supabase API URLs
SUPABASE_API_EXTERNAL_URL=http://localhost:15321
SUPABASE_SITE_URL=http://localhost:3000
SUPABASE_ADDITIONAL_REDIRECT_URLS=
SUPABASE_DISABLE_SIGNUP=false

# Supabase Kong Gateway Ports (Test range: 15xxx)
SUPABASE_KONG_HTTP_PORT=15321
SUPABASE_KONG_HTTPS_PORT=15322

# Supabase Auth Settings
ENABLE_EMAIL_SIGNUP=true
ENABLE_EMAIL_AUTOCONFIRM=true
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_ADMIN_EMAIL=admin@example.com
SMTP_SENDER_NAME="isA Platform"

# Supabase Service Images
KONG_IMAGE=kong:2.8.1
GOTRUE_IMAGE=public.ecr.aws/supabase/gotrue:v2.178.0
POSTGREST_IMAGE=postgrest/postgrest:v12.2.3
REALTIME_IMAGE=public.ecr.aws/supabase/realtime:v2.33.66
STORAGE_IMAGE=public.ecr.aws/supabase/storage-api:v1.11.14
IMGPROXY_IMAGE=darthsim/imgproxy:v3.8.0
META_IMAGE=public.ecr.aws/supabase/postgres-meta:v0.84.2
STUDIO_IMAGE=supabase/studio:latest

# ============================================
# Cache & Storage (Docker Network)
# ============================================
REDIS_URL=redis://isa-redis-test:6379

MINIO_ENDPOINT=isa-minio-test:9000
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# ============================================
# Graph Database
# ============================================
NEO4J_AUTH=neo4j/isa_neo4j_2024

# ============================================
# Time Series Database
# ============================================
INFLUXDB_ADMIN_USER=admin
INFLUXDB_ADMIN_PASSWORD=isa_influx_2024
INFLUXDB_ADMIN_TOKEN=isa_influx_admin_token_2024
INFLUXDB_ORG=isa-platform
INFLUXDB_BUCKET=metrics

# ============================================
# MQTT Broker (Docker Network)
# ============================================
MQTT_URL=mqtt://isa-mosquitto-test:1883

# ============================================
# Logging & Monitoring (Docker Network)
# ============================================
LOKI_URL=http://isa-loki-test:3100
LOKI_ENABLED=true

GRAFANA_ROOT_URL=http://localhost:13003
GF_ADMIN_USER=admin
GF_ADMIN_PASSWORD=admin

LOG_LEVEL=DEBUG
LOG_FORMAT="%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# ============================================
# External APIs (Test Keys)
# ============================================
OPENAI_API_KEY=your-test-openai-api-key
REPLICATE_API_TOKEN=your-test-replicate-token
HF_TOKEN=your-test-huggingface-token

# ============================================
# Auth & Payment (Test)
# ============================================
AUTH0_DOMAIN=dev-47zcqarlxizdkads.us.auth0.com
AUTH0_CLIENT_ID=your-test-auth0-client-id
AUTH0_CLIENT_SECRET=your-test-auth0-client-secret

STRIPE_API_KEY=your-test-stripe-api-key
STRIPE_WEBHOOK_SECRET=your-test-stripe-webhook-secret

# ============================================
# Python
# ============================================
PYTHONUNBUFFERED=1
