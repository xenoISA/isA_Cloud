# Mosquitto MQTT Broker 配置
# 文件名: deployments/configs/staging/mosquitto.conf
# 用于 staging 环境

# ============== Listeners ==============

# MQTT 协议监听器
listener 1883
protocol mqtt
allow_anonymous true

# WebSocket 监听器
listener 9001
protocol websockets
allow_anonymous true

# ============== 持久化配置 ==============
persistence true
persistence_location /mosquitto/data/
autosave_interval 300

# ============== 日志配置 ==============
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# ============== 安全配置 ==============
# 生产环境应该设置为 false 并配置认证
allow_anonymous true

# ============== 性能配置 ==============
max_connections 1000
max_queued_messages 1000
max_packet_size 268435456



