---
apiVersion: v1
kind: Service
metadata:
  name: consul-agent
  namespace: isa-cloud-staging
  labels:
    app: consul-agent
    tier: infrastructure
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 8500
      targetPort: 8500
      protocol: TCP
    - name: grpc
      port: 8502
      targetPort: 8502
      protocol: TCP
    - name: dns-tcp
      port: 8600
      targetPort: 8600
      protocol: TCP
    - name: dns-udp
      port: 8600
      targetPort: 8600
      protocol: UDP
    - name: serf-lan
      port: 8301
      targetPort: 8301
      protocol: TCP
    - name: serf-wan
      port: 8302
      targetPort: 8302
      protocol: TCP
  selector:
    app: consul-agent
