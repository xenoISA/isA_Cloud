# 使用 Consul 服务发现的配置示例
# Configuration with Consul Service Discovery
#
# 文件名: configs/examples/with-consul.yaml
# 用途: 使用 Consul 进行服务发现的配置示例

# ====================================
# Consul 配置
# ====================================
consul:
  enabled: true
  host: "localhost"
  port: 8500

# ====================================
# 日志服务 (Logging)
# ====================================
loki:
  # 不需要配置 URL，将通过 Consul 自动发现
  use_consul: true
  service_name: "loki-service"
  
  # 其他配置
  tenant_id: "production"
  batch_size: 200
  batch_wait: "2s"
  static_labels:
    environment: "production"
    discovery: "consul"

# ====================================
# 消息服务 (Messaging)
# ====================================
mqtt:
  # 不需要配置 broker_url，将通过 Consul 自动发现
  use_consul: true
  service_name: "mqtt-service"
  
  # 其他配置
  client_id: "isa-cloud-${HOSTNAME}"
  qos: 1
  auto_reconnect: true

# ====================================
# 存储服务 (Storage)
# ====================================
minio:
  # 不需要配置 endpoint，将通过 Consul 自动发现
  use_consul: true
  service_name: "minio-service"
  grpc_port: 50051
  
  # 认证配置
  access_key: "${MINIO_ACCESS_KEY}"
  secret_key: "${MINIO_SECRET_KEY}"
  region: "us-east-1"

# ====================================
# 分析服务 (Analytics)
# ====================================
duckdb:
  use_consul: true
  service_name: "duckdb-service"
  grpc_port: 50052
  
  # 数据库配置
  database_path: "/data/analytics.duckdb"
  memory_limit: "4GB"
  threads: 4



